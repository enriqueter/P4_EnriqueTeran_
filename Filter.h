/*
 * Filter.h
 *
 *  Created on: 30 nov. 2020
 *      Author: Enrique Ter√°n
 */

#ifndef FILTER_H_
#define FILTER_H_

#include "arm_math.h"
/*Filter Definitions*/
#define NUM_COEF 41
#define DATA_SIZE 1024
#define MAX_DATA 4*1024


static float32_t FilterState[3][DATA_SIZE + NUM_COEF -1];
arm_fir_instance_f32 F[3];
static float32_t FilterOutput[MAX_DATA];
/*Coefficients declarations*/
const float32_t Filter_LP_coefficients[NUM_COEF]  =
{
		0.000729144080436880,
		0.00103879167930554,
		0.00156260114951790,
		0.00239910525884799,
		0.00363803613929854,
		0.00535291270184113,
		0.00759433622221751,
		0.0103844881894790,
		0.0137132555169270,
		0.0175363076593737,
		0.0217753246276323,
		0.0263204328066998,
		0.0310347566424897,
		0.0357608490527831,
		0.0403286321011087,
		0.0445643714351422,
		0.0483001310642717,
		0.0513831149304534,
		0.0536843015489875,
		0.0551058180963226,
		0.0555865781937273,
		0.0551058180963226,
		0.0536843015489875,
		0.0513831149304534,
		0.0483001310642717,
		0.0445643714351422,
		0.0403286321011087,
		0.0357608490527831,
		0.0310347566424897,
		0.0263204328066998,
		0.0217753246276323,
		0.0175363076593737,
		0.0137132555169270,
		0.0103844881894790,
		0.00759433622221751,
		0.00535291270184113,
		0.00363803613929854,
		0.00239910525884799,
		0.00156260114951790,
		0.00103879167930554,
		0.000729144080436880
};

const float32_t Filter_BP_coefficients[NUM_COEF]  =
{


		0.000332328788036078,
		-0.00222202250278687,
		-0.000243468002361839,
		-0.00101472158107456,
		-0.00595865278850637,
		-0.000312510148644018,
		-0.00634412285171482,
		-0.0138927980335711,
		-0.000113682505740844,
		-0.0201232488986606,
		-0.0232290024699129,
		0.000571234290012407,
		-0.0458062732931645,
		-0.0260343547449853,
		0.00161523399161425,
		-0.0881905572907750,
		-0.00408259055674219,
		0.00257572893102040,
		-0.192256759106812,
		0.205971532840619,
		0.668701107586983,
		0.205971532840619,
		-0.192256759106812,
		0.00257572893102040,
		-0.00408259055674219,
		-0.0881905572907750,
		0.00161523399161425,
		-0.0260343547449853,
		-0.0458062732931645,
		0.000571234290012407,
		-0.0232290024699129,
		-0.0201232488986606,
		-0.000113682505740844,
		-0.0138927980335711,
		-0.00634412285171482,
		-0.000312510148644018,
		-0.00595865278850637,
		-0.00101472158107456,
		-0.000243468002361839,
		-0.00222202250278687,
		0.000332328788036078

};

const float32_t Filter_HP_coefficients[NUM_COEF]  =
{
		-0.000895563122672684,
		0.00142971656277340,
		-0.000959990719729866,
		-0.000830576299519983,
		0.00317700980798152,
		-0.00381206680268912,
		0.000514614058736733,
		0.00594112065004727,
		-0.0104553635406920,
		0.00668270518290038,
		0.00653290104454921,
		-0.0208598159982624,
		0.0220582308810007,
		-0.00143053927395064,
		-0.0327045351141002,
		0.0541736905305896,
		-0.0331293431801896,
		-0.0421888630994140,
		0.151601375969860,
		-0.249217468880266,
		0.288297132974930,
		-0.249217468880266,
		0.151601375969860,
		-0.0421888630994140	,
		-0.0331293431801896,
		0.0541736905305896,
		-0.0327045351141002,
		-0.00143053927395064,
		0.0220582308810007,
		-0.0208598159982624,
		0.00653290104454921,
		0.00668270518290038,
		-0.0104553635406920,
		0.00594112065004727,
		0.000514614058736733,
		-0.00381206680268912,
		0.00317700980798152,
		-0.000830576299519983,
		-0.000959990719729866,
		0.00142971656277340,
		-0.000895563122672684

};

/*Filter Initialization Functions*/
void LP_Filter();
void BP_Filter();
void HP_Filter();
/*Filters Initialization and data buffer creation*/
void Filter_Initialization(uint32_t *InputData);
/*Processing of Data passed through the selected filter */
void Filter_Process(uint8_t filter_type);
#endif /* FILTER_H_ */
